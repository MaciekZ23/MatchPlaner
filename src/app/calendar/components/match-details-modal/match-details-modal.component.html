<div
  #modalRef
  class="modal fade"
  tabindex="-1"
  aria-hidden="true"
  role="dialog"
  aria-modal="true"
  [attr.aria-labelledby]="'match-details-title'"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div
      class="modal-content bg-dark text-white shadow-lg rounded-3 overflow-hidden"
    >
      <div
        class="modal-header d-flex justify-content-center align-items-center modal-header-bar bg-primary text-white"
      >
        <h2 id="match-details-title" class="visually-hidden">
          {{ moduleStrings.modalTitle }}: {{ match?.teamA }} –
          {{ match?.teamB }}
        </h2>
        <div class="header-grid align-items-center">
          <div class="team text-start">{{ match?.teamA }}</div>
          <div class="score text-center">
            <ng-container *ngIf="showScore; else noScore">
              {{ scoreText }}
            </ng-container>
            <ng-template #noScore>
              <span class="visually-hidden"
                >Brak wyniku — mecz nie został jeszcze rozegrany lub jest w
                trakcie</span
              >
            </ng-template>
          </div>
          <div class="team text-end">{{ match?.teamB }}</div>
        </div>
        <button
          type="button"
          class="btn-close btn-close-white ms-2"
          [attr.aria-label]="moduleStrings.headerAriaClose"
          (click)="onRequestClose()"
        ></button>
      </div>

      <div class="modal-body py-2 py-md-4" *ngIf="match">
        <div class="row g-4">
          <div class="col-12">
            <ul class="list-unstyled m-0">
              <li
                class="event-row d-flex align-items-center gap-1 gap-md-2 py-1"
                *ngFor="let d of match?.details"
                [ngClass]="{
                  'justify-content-start': d.scoringTeam === 'A',
                  'justify-content-end': d.scoringTeam === 'B'
                }"
              >
                <ng-container *ngIf="d.scoringTeam === 'A'; else rightSide">
                  <span class="badge custom-badge align-self-center me-2 lh-1">
                    <ng-container [ngSwitch]="d.event">
                      <i
                        *ngSwitchCase="'GOAL'"
                        class="fas fa-futbol me-1"
                        aria-hidden="true"
                      ></i>

                      <ng-container *ngSwitchCase="'OWN_GOAL'">
                        <i
                          class="fas fa-futbol me-1 own-goal"
                          aria-hidden="true"
                        ></i>
                        <span class="ms-2 lh-1">{{
                          moduleStrings.ownGoal
                        }}</span>
                      </ng-container>

                      <ng-container *ngSwitchCase="'CARD'">
                        <i
                          *ngIf="d.card === 'YELLOW'"
                          class="fas fa-square card-icon card-icon-yellow me-1"
                          aria-hidden="true"
                        ></i>

                        <span
                          *ngIf="d.card === 'SECOND_YELLOW'"
                          aria-hidden="true"
                        >
                          <i
                            class="fas fa-square card-icon card-icon-second-yellow me-1"
                          ></i>
                        </span>

                        <i
                          *ngIf="d.card === 'RED'"
                          class="fas fa-square card-icon card-icon-red me-1"
                          aria-hidden="true"
                        ></i>
                      </ng-container>
                    </ng-container>

                    {{ d.time }}{{ moduleStrings.minuteSuffix }}
                  </span>

                  <span
                    class="d-inline-block mw-100 fw-semibold text-truncate text-start"
                  >
                    {{ d.player }}
                  </span>
                </ng-container>

                <ng-template #rightSide>
                  <span
                    class="d-inline-block mw-100 fw-semibold text-truncate text-end"
                  >
                    {{ d.player }}
                  </span>

                  <span class="badge custom-badge align-self-center ms-2 lh-1">
                    {{ d.time }}{{ moduleStrings.minuteSuffix }}

                    <ng-container [ngSwitch]="d.event">
                      <i
                        *ngSwitchCase="'GOAL'"
                        class="fas fa-futbol ms-1"
                        aria-hidden="true"
                      ></i>

                      <ng-container *ngSwitchCase="'OWN_GOAL'">
                        <i
                          class="fas fa-futbol ms-1 own-goal"
                          aria-hidden="true"
                        ></i>
                        <span class="ms-2 lh-1">{{
                          moduleStrings.ownGoal
                        }}</span>
                      </ng-container>

                      <ng-container *ngSwitchCase="'CARD'">
                        <i
                          *ngIf="d.card === 'YELLOW'"
                          class="fas fa-square card-icon card-icon-yellow ms-1"
                          aria-hidden="true"
                        ></i>

                        <span
                          *ngIf="d.card === 'SECOND_YELLOW'"
                          aria-hidden="true"
                        >
                          <i
                            class="fas fa-square card-icon card-icon-second-yellow ms-1"
                          ></i>
                        </span>

                        <i
                          *ngIf="d.card === 'RED'"
                          class="fas fa-square card-icon card-icon-red ms-1"
                          aria-hidden="true"
                        ></i>
                      </ng-container>
                    </ng-container>
                  </span>
                </ng-template>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="modal-footer border-0 pt-0">
        <button
          type="button"
          class="btn btn-primary px-4"
          (click)="onRequestClose()"
        >
          {{ moduleStrings.close }}
        </button>
      </div>
    </div>
  </div>
</div>
