<div class="card bg-dark text-white">
  <h2
    id="topScorersTitle"
    class="fs-5 text p-3 card-title card-header bg-transparent d-flex justify-content-between"
  >
    <span>{{ moduleStrings.title }}</span>
    <button
      #collapseBtn
      class="btn btn-link text-white p-0 btn-sm"
      (click)="toggleCollapse(); hideTooltip($event)"
      [attr.aria-label]="isCollapsed ? 'Rozwiń sekcję' : 'Zwiń sekcję'"
      [attr.aria-expanded]="!isCollapsed"
      aria-controls="topScorersCollapse"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      data-bs-trigger="hover"
      [attr.data-bs-title]="isCollapsed ? 'Rozwiń sekcję' : 'Zwiń sekcję'"
    >
      <i
        class="fas"
        [ngClass]="{
          'fa-chevron-down': isCollapsed,
          'fa-chevron-up': !isCollapsed
        }"
        aria-hidden="true"
      ></i>
    </button>
  </h2>
  <div
    class="collapse"
    [ngClass]="{ show: !isCollapsed }"
    id="topScorersCollapse"
  >
    <div
      class="table-responsive card-body"
      tabindex="0"
      role="region"
      aria-labelledby="topScorersTitle"
    >
      <table class="table table-dark table-hover align-middle w-100">
        <thead>
          <tr>
            <th scope="col">{{ moduleStrings.headers.pos }}</th>
            <th scope="col" class="text-center">
              {{ moduleStrings.headers.player }}
            </th>
            <th scope="col" class="d-none d-md-table-cell">
              {{ moduleStrings.headers.team }}
            </th>
            <th
              scope="col"
              class="sortable"
              [attr.aria-sort]="
                sortColumn === 'goals'
                  ? sortDirection === 'asc'
                    ? 'ascenACding'
                    : 'descending'
                  : 'none'
              "
            >
              <button
                type="button"
                class="th-btn"
                (click)="sortData('goals'); hideTooltip($event, false)"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-trigger="hover"
                [attr.aria-label]="
                  sortColumn === 'goals'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po golach'
                "
                [attr.data-bs-title]="
                  sortColumn === 'goals'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po golach'
                "
              >
                {{ moduleStrings.headers.goals }}
                <i
                  aria-hidden="true"
                  [class]="
                    sortColumn === 'goals'
                      ? 'fa fa-sort-' + sortDirection
                      : 'fa fa-sort'
                  "
                ></i>
              </button>
            </th>

            <th
              scope="col"
              class="sortable d-none d-md-table-cell"
              [attr.aria-sort]="
                sortColumn === 'assists'
                  ? sortDirection === 'asc'
                    ? 'ascending'
                    : 'descending'
                  : 'none'
              "
            >
              <button
                type="button"
                class="th-btn"
                (click)="sortData('assists'); hideTooltip($event, false)"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-trigger="hover"
                [attr.aria-label]="
                  sortColumn === 'assists'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po asystach'
                "
                [attr.data-bs-title]="
                  sortColumn === 'assists'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po asystach'
                "
              >
                {{ moduleStrings.headers.assists }}
                <i
                  aria-hidden="true"
                  [class]="
                    sortColumn === 'assists'
                      ? 'fa fa-sort-' + sortDirection
                      : 'fa fa-sort'
                  "
                ></i>
              </button>
            </th>

            <th
              scope="col"
              class="sortable d-none d-md-table-cell"
              [attr.aria-sort]="
                sortColumn === 'points'
                  ? sortDirection === 'asc'
                    ? 'ascending'
                    : 'descending'
                  : 'none'
              "
            >
              <button
                type="button"
                class="th-btn"
                (click)="sortData('points'); hideTooltip($event, false)"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-trigger="hover"
                [attr.aria-label]="
                  sortColumn === 'points'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po punktach'
                "
                [attr.data-bs-title]="
                  sortColumn === 'points'
                    ? sortDirection === 'asc'
                      ? 'Sortuj malejąco'
                      : 'Sortuj rosnąco'
                    : 'Sortuj po punktach'
                "
              >
                {{ moduleStrings.headers.points }}
                <i
                  aria-hidden="true"
                  [class]="
                    sortColumn === 'points'
                      ? 'fa fa-sort-' + sortDirection
                      : 'fa fa-sort'
                  "
                ></i>
              </button>
            </th>
          </tr>
        </thead>
      </table>
      <div
        class="table-body-container"
        tabindex="0"
        role="region"
        [attr.aria-label]="
          (moduleStrings.title || 'Strzelcy') + ' — przewijana tabela strzelców'
        "
      >
        <table class="table table-dark table-hover align-middle w-100">
          <tbody>
            <tr *ngFor="let player of topScorers$ | async; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ player.playerName }}</td>
              <td class="d-none d-md-table-cell">{{ player.teamName }}</td>
              <td>{{ player.goals }}</td>
              <td class="d-none d-md-table-cell">{{ player.assists }}</td>
              <td class="d-none d-md-table-cell">{{ player.points }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
